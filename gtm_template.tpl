___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Cookie Consent",
  "brand": {
    "id": "HKLink",
    "displayName": "HK Link",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAMgCAYAAADbcAZoAAAACXBIWXMAAAsSAAALEgHS3X78AAAgAElEQVR4nO3dz28V9rnn8adV1ljWWcyMBOhe+Up2klUWxGwYX1mGqGlE46BCLRIbCR8cHEtgn0C9oCa4WVBy+RGJkhIbKdBEKVSE3ihqRGJZk8kGyqKrpHA10YwAaWYWFjL/QGZx29xJm6TG2M/3/Hi9llXifLbvnvN8z/e+/PLLLwMAACDB90sPAAAAWocAAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAIM0jpQcAtLJr12/E8zu2l57BCnr74qXY2L2h9AyAuuUTEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEAAAII0AAQAA0ggQAAAgjQABAADSCBAAACCNAAEAANIIEACAv3L7zt3SE6BpCRAAgD9bXLwfP5t6JXo3bYq3LrxTeg40JQECABARb114J/p6e+PdC+cjIuKXr5+MxcX7hVdB8xEgAEBLu3b9Rjz11A/i1alDcW9h4av//d7CQrxxdqbgMmhOAgQAaEm379yN3cN74vkd2+OLWze/8Z+ZPXPaPQisMAECALSUxcX7cfTY8ejdtCk+mfv47/7zR45MJ6yC1iFAAICWcfnK+9HX2xuzZ04v+d/5ZO7j+GhufhVXQWsRIABA07t2/Ub8ePtP4qfj+75257FUx197bRVWQWsSIABA07p9527sH6/F8zu2xx//cH3Zf+eLWzfj9JmzK7gMWpcAAQCazuLi/Th95mz0btoUH1x5b0X+5vlzM57lhRUgQACApnL5yvuxffuOOHXs6Ir+3XsLC/Ev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RoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaQQIAACQRoAAAABpBAgAAJBGgAAAAGkECAAAkEaAAAAAaf4fxRKrm5U32zoAAAAASUVORK5CYII\u003d"
  },
  "description": "Cookie Consent · See documentation at hklink.no/cookie_consent",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "package_version",
    "displayName": "Package version",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "REGEX",
        "args": [
          "^latest$|^([\\d]{1}\\.[\\d]{1}\\.[\\d]{1})(?:(\\-beta|\\-alpha)\\.[\\d]+)?$"
        ]
      }
    ],
    "help": "The version of CookieConsentWrapper package. Must be a valid version in a format \u003ccode\u003ex.x.x\u003c/code\u003e or string \u003ccode\u003elates\u003c/code\u003e.",
    "defaultValue": "latest"
  },
  {
    "type": "CHECKBOX",
    "name": "force_consent",
    "checkboxText": "Make consent required",
    "simpleValueType": true,
    "defaultValue": false,
    "help": "Block page until action"
  },
  {
    "type": "CHECKBOX",
    "name": "autorun",
    "checkboxText": "Show the widget as soon as possible",
    "simpleValueType": true,
    "defaultValue": true,
    "help": "You need to manually call the CookieConsentWrapper.unwrap().show() method if you disable the option."
  },
  {
    "type": "CHECKBOX",
    "name": "hide_from_bots",
    "checkboxText": "Hide from bots",
    "simpleValueType": true,
    "defaultValue": false,
    "help": "Enable if you don\u0027t want the plugin to run when a bot/crawler/webdriver is detected."
  },
  {
    "type": "TEXT",
    "name": "revision",
    "displayName": "Revision",
    "simpleValueType": true,
    "valueHint": "Increment when new revision is required.",
    "defaultValue": 0,
    "valueValidators": [
      {
        "type": "NON_NEGATIVE_NUMBER"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "delay",
    "displayName": "Delay",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_NEGATIVE_NUMBER"
      }
    ],
    "defaultValue": 500,
    "valueUnit": "ms"
  },
  {
    "type": "GROUP",
    "name": "consent_modal_options",
    "displayName": "Consent modal options",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "consent_modal_layout",
        "displayName": "Layout",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "box",
            "displayValue": "box"
          },
          {
            "value": "cloud",
            "displayValue": "cloud"
          },
          {
            "value": "bar",
            "displayValue": "bar"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "box",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "SELECT",
        "name": "consent_modal_position",
        "displayName": "Position",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "bottom left",
            "displayValue": "bottom - left"
          },
          {
            "value": "bottom right",
            "displayValue": "bottom - right"
          },
          {
            "value": "bottom center",
            "displayValue": "bottom - center"
          },
          {
            "value": "middle left",
            "displayValue": "middle - left"
          },
          {
            "value": "middle right",
            "displayValue": "middle - right"
          },
          {
            "value": "middle center",
            "displayValue": "middle - center"
          },
          {
            "value": "top left",
            "displayValue": "top - left"
          },
          {
            "value": "top right",
            "displayValue": "top - right"
          },
          {
            "value": "top center",
            "displayValue": "top - center"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "bottom center",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "SELECT",
        "name": "consent_modal_transition",
        "displayName": "Transition",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "zoom",
            "displayValue": "zoom"
          },
          {
            "value": "slide",
            "displayValue": "slide"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "zoom",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "SELECT",
        "name": "consent_modal_primary_button_role",
        "displayName": "Primary button role",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "accept_all",
            "displayValue": "Accept all"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "accept_all"
      },
      {
        "type": "SELECT",
        "name": "consent_modal_secondary_button_role",
        "displayName": "Secondary button role",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "settings",
            "displayValue": "Open settings"
          },
          {
            "value": "accept_necessary",
            "displayValue": "Accept necessary"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "settings"
      },
      {
        "type": "SELECT",
        "name": "consent_modal_buttons_order",
        "displayName": "Buttons order",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "primary_secondary",
            "displayValue": "Primary - Secondary"
          },
          {
            "value": "secondary_primary",
            "displayValue": "Secondary - Primary"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "primary_secondary"
      },
      {
        "type": "CHECKBOX",
        "name": "consent_modal_show_third_button",
        "checkboxText": "Show third button",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "Adds the third button to the consent modal. If the secondary button\u0027s role is \"Open settings\" the third button\u0027s role is \"Accept necessary\" and vice versa."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "settings_modal_options",
    "displayName": "Settings modal options",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "settings_modal_layout",
        "displayName": "Layout",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "box",
            "displayValue": "box"
          },
          {
            "value": "bar",
            "displayValue": "bar"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "box"
      },
      {
        "type": "SELECT",
        "name": "settings_modal_position",
        "displayName": "Position",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "left",
            "displayValue": "left"
          },
          {
            "value": "right",
            "displayValue": "right"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "left",
        "help": "The position is applied only if the layout is set to \u003ccode\u003ebar\u003c/code\u003e."
      },
      {
        "type": "SELECT",
        "name": "settings_modal_transition",
        "displayName": "Transition",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "zoom",
            "displayValue": "zoom"
          },
          {
            "value": "slide",
            "displayValue": "slide"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "zoom"
      },
      {
        "type": "TEXT",
        "name": "modal_trigger_selector",
        "displayName": "Settings modal trigger selector",
        "simpleValueType": true,
        "help": "CSS selector that matches some element on your website. The element will be cloned and modified as a button that opens the cookie settings modal.\nThe option is ignored if the value is empty."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "cookies_options",
    "displayName": "Cookies options",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "cookie_name",
        "displayName": "Cookie name",
        "simpleValueType": true,
        "defaultValue": "cc-settings",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "help": "The name of a cookie value that holds information about the user\u0027s consent."
      },
      {
        "type": "TEXT",
        "name": "cookie_domain",
        "displayName": "Cookie domain",
        "simpleValueType": true,
        "help": "The domain name for the cookie that holds information about the user\u0027s consent, for example \".example.com\". \n\nIf the value is empty, it is automatically set in a browser using the \u003ccode\u003ewindow.location.hostname\u003c/code\u003e variable."
      },
      {
        "type": "TEXT",
        "name": "cookie_expiration",
        "displayName": "Cookie expiration",
        "simpleValueType": true,
        "defaultValue": 182,
        "valueUnit": "days",
        "valueValidators": [
          {
            "type": "POSITIVE_NUMBER"
          }
        ],
        "help": "How many days will be a cookie value valid."
      },
      {
        "type": "CHECKBOX",
        "name": "auto_clear_enabled",
        "checkboxText": "Enable cookies auto-clear",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "All cookies will be deleted based on the user\u0027s consent and a selected strategy if the option is enabled."
      },
      {
        "type": "SELECT",
        "name": "auto_clear_strategy",
        "displayName": "Cookies auto-clear strategy",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "clear_all_except_defined",
            "displayValue": "Clear all except defined"
          },
          {
            "value": "clear_defined_only",
            "displayValue": "Clear defined only"
          },
          {
            "value": "cookie_tables",
            "displayValue": "Use cookie tables"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "clear_all_except_defined",
        "enablingConditions": [
          {
            "paramName": "auto_clear_enabled",
            "paramValue": true,
            "type": "EQUALS"
          }
        ],
        "subParams": [
          {
            "type": "LABEL",
            "name": "label_clear_all_except_defined",
            "displayName": "All cookies except those you define below will be deleted when the user denies any storage.",
            "enablingConditions": [
              {
                "paramName": "auto_clear_strategy",
                "paramValue": "clear_all_except_defined",
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "LABEL",
            "name": "label_clear_defined_only",
            "displayName": "All cookies you defined below will be deleted when the user denies any storage.",
            "enablingConditions": [
              {
                "paramName": "auto_clear_strategy",
                "paramValue": "clear_defined_only",
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "LABEL",
            "name": "label_cookie_tables",
            "displayName": "Cookies for deletion are defined by cookie tables for each storage. The CMP application must be integrated for this strategy to work properly",
            "enablingConditions": [
              {
                "paramName": "auto_clear_strategy",
                "paramValue": "cookie_tables",
                "type": "EQUALS"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "auto_clear_cookie_names",
        "displayName": "Cookie names",
        "simpleValueType": true,
        "textAsList": true,
        "enablingConditions": [
          {
            "paramName": "auto_clear_strategy",
            "paramValue": "clear_all_except_defined",
            "type": "EQUALS"
          },
          {
            "paramName": "auto_clear_strategy",
            "paramValue": "clear_defined_only",
            "type": "EQUALS"
          }
        ],
        "help": "One name per line.",
        "lineCount": 3
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "functionality_storage",
    "displayName": "Functionality storage",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "functionality_storage_enabled_by_default",
        "checkboxText": "Enabled by default",
        "simpleValueType": true,
        "defaultValue": true
      },
      {
        "type": "CHECKBOX",
        "name": "functionality_storage_display_in_widget",
        "checkboxText": "Display in the widget",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "CHECKBOX",
            "name": "functionality_storage_readonly",
            "checkboxText": "Readonly",
            "simpleValueType": true,
            "defaultValue": true,
            "enablingConditions": [
              {
                "paramName": "functionality_storage_display_in_widget",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "SELECT",
            "name": "functionality_storage_sync_consent_with",
            "displayName": "Synchronize consent with",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "personalization_storage",
                "displayValue": "Personalization storage"
              },
              {
                "value": "security_storage",
                "displayValue": "Security storage"
              },
              {
                "value": "ad_storage",
                "displayValue": "Ad storage"
              },
              {
                "value": "analytics_storage",
                "displayValue": "Analytics storage"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "functionality_storage_display_in_widget",
                "paramValue": false,
                "type": "EQUALS"
              }
            ],
            "notSetText": "None"
          },
          {
            "type": "CHECKBOX",
            "name": "functionality_storage_show_again",
            "checkboxText": "Show the modal again if storage is denied",
            "simpleValueType": true,
            "defaultValue": false,
            "enablingConditions": [
              {
                "paramName": "functionality_storage_display_in_widget",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "The settings modal will be opened again if the storage is denied.",
            "subParams": [
              {
                "type": "TEXT",
                "name": "functionality_storage_show_again_expiration",
                "displayName": "After",
                "simpleValueType": true,
                "defaultValue": 7,
                "enablingConditions": [
                  {
                    "paramName": "functionality_storage_show_again",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueUnit": "days",
                "valueValidators": [
                  {
                    "type": "POSITIVE_NUMBER"
                  }
                ]
              }
            ]
          }
        ],
        "defaultValue": true
      },
      {
        "type": "TEXT",
        "name": "functionality_storage_event_trigger",
        "displayName": "Event trigger name",
        "simpleValueType": true,
        "defaultValue": "hklink_functionality_storage",
        "help": "The name of a trigger that will be invoked on after a consent."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "security_storage",
    "displayName": "Security storage",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "security_storage_enabled_by_default",
        "checkboxText": "Enabled by default",
        "simpleValueType": true,
        "defaultValue": false
      },
      {
        "type": "CHECKBOX",
        "name": "security_storage_display_in_widget",
        "checkboxText": "Display in the widget",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "CHECKBOX",
            "name": "security_storage_readonly",
            "checkboxText": "Readonly",
            "simpleValueType": true,
            "defaultValue": false,
            "enablingConditions": [
              {
                "paramName": "security_storage_display_in_widget",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "SELECT",
            "name": "security_storage_sync_consent_with",
            "displayName": "Synchronize consent with",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "personalization_storage",
                "displayValue": "Personalization storage"
              },
              {
                "value": "ad_storage",
                "displayValue": "Ad storage"
              },
              {
                "value": "analytics_storage",
                "displayValue": "Analytics storage"
              },
              {
                "value": "functionality_storage",
                "displayValue": "Functionality storage"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "security_storage_display_in_widget",
                "paramValue": false,
                "type": "EQUALS"
              }
            ],
            "notSetText": "None"
          },
          {
            "type": "CHECKBOX",
            "name": "security_storage_show_again",
            "checkboxText": "Show the modal again if storage is denied",
            "simpleValueType": true,
            "defaultValue": false,
            "enablingConditions": [
              {
                "paramName": "security_storage_display_in_widget",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "The settings modal will be opened again if the storage is denied.",
            "subParams": [
              {
                "type": "TEXT",
                "name": "security_storage_show_again_expiration",
                "displayName": "After",
                "simpleValueType": true,
                "defaultValue": 7,
                "enablingConditions": [
                  {
                    "paramName": "security_storage_show_again",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueUnit": "days",
                "valueValidators": [
                  {
                    "type": "POSITIVE_NUMBER"
                  }
                ]
              }
            ]
          }
        ],
        "defaultValue": false
      },
      {
        "type": "TEXT",
        "name": "security_storage_event_trigger",
        "displayName": "Event trigger name",
        "simpleValueType": true,
        "defaultValue": "hklink_security_storage",
        "help": "The name of a trigger that will be invoked on after a consent."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "personalization_storage",
    "displayName": "Personalization storage",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "personalization_storage_enabled_by_default",
        "checkboxText": "Enabled by default",
        "simpleValueType": true,
        "defaultValue": false
      },
      {
        "type": "CHECKBOX",
        "name": "personalization_storage_display_in_widget",
        "checkboxText": "Display in the widget",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "CHECKBOX",
            "name": "personalization_storage_readonly",
            "checkboxText": "Readonly",
            "simpleValueType": true,
            "defaultValue": false,
            "enablingConditions": [
              {
                "paramName": "personalization_storage_display_in_widget",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "SELECT",
            "name": "personalization_storage_sync_consent_with",
            "displayName": "Synchronize consent with",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "ad_storage",
                "displayValue": "Ad storage"
              },
              {
                "value": "analytics_storage",
                "displayValue": "Analytics storage"
              },
              {
                "value": "functionality_storage",
                "displayValue": "Functionality storage"
              },
              {
                "value": "security_storage",
                "displayValue": "Security storage"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "personalization_storage_display_in_widget",
                "paramValue": false,
                "type": "EQUALS"
              }
            ],
            "notSetText": "None"
          },
          {
            "type": "CHECKBOX",
            "name": "personalization_storage_show_again",
            "checkboxText": "Show the modal again if storage is denied",
            "simpleValueType": true,
            "defaultValue": false,
            "enablingConditions": [
              {
                "paramName": "personalization_storage_display_in_widget",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "The settings modal will be opened again if the storage is denied.",
            "subParams": [
              {
                "type": "TEXT",
                "name": "personalization_storage_show_again_expiration",
                "displayName": "After",
                "simpleValueType": true,
                "defaultValue": 7,
                "enablingConditions": [
                  {
                    "paramName": "personalization_storage_show_again",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueUnit": "days",
                "valueValidators": [
                  {
                    "type": "POSITIVE_NUMBER"
                  }
                ]
              }
            ]
          }
        ],
        "defaultValue": false
      },
      {
        "type": "TEXT",
        "name": "personalization_storage_event_trigger",
        "displayName": "Event trigger name",
        "simpleValueType": true,
        "defaultValue": "hklink_personalization_storage",
        "help": "The name of a trigger that will be invoked on after a consent."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "ad_storage",
    "displayName": "Ad storage",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "ad_storage_enabled_by_default",
        "checkboxText": "Enabled by default",
        "simpleValueType": true,
        "defaultValue": false
      },
      {
        "type": "CHECKBOX",
        "name": "ad_storage_display_in_widget",
        "checkboxText": "Display in the widget",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "CHECKBOX",
            "name": "ad_storage_readonly",
            "checkboxText": "Readonly",
            "simpleValueType": true,
            "defaultValue": false,
            "enablingConditions": [
              {
                "paramName": "ad_storage_display_in_widget",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "SELECT",
            "name": "ad_storage_sync_consent_with",
            "displayName": "Synchronize consent with",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "analytics_storage",
                "displayValue": "Analytics storage"
              },
              {
                "value": "functionality_storage",
                "displayValue": "Functionality storage"
              },
              {
                "value": "security_storage",
                "displayValue": "Security storage"
              },
              {
                "value": "personalization_storage",
                "displayValue": "Personalization storage"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "ad_storage_display_in_widget",
                "paramValue": false,
                "type": "EQUALS"
              }
            ],
            "notSetText": "None"
          },
          {
            "type": "CHECKBOX",
            "name": "ad_storage_show_again",
            "checkboxText": "Show the modal again if storage is denied",
            "simpleValueType": true,
            "defaultValue": false,
            "enablingConditions": [
              {
                "paramName": "ad_storage_display_in_widget",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "The settings modal will be opened again if the storage is denied.",
            "subParams": [
              {
                "type": "TEXT",
                "name": "ad_storage_show_again_expiration",
                "displayName": "After",
                "simpleValueType": true,
                "defaultValue": 7,
                "enablingConditions": [
                  {
                    "paramName": "ad_storage_show_again",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueUnit": "days",
                "valueValidators": [
                  {
                    "type": "POSITIVE_NUMBER"
                  }
                ]
              }
            ]
          }
        ],
        "defaultValue": false
      },
      {
        "type": "TEXT",
        "name": "ad_storage_event_trigger",
        "displayName": "Event trigger name",
        "simpleValueType": true,
        "defaultValue": "hklink_ad_storage",
        "help": "The name of a trigger that will be invoked on after a consent."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "analytics_storage",
    "displayName": "Analytics storage",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "analytics_storage_enabled_by_default",
        "checkboxText": "Enabled by default",
        "simpleValueType": true,
        "defaultValue": false
      },
      {
        "type": "CHECKBOX",
        "name": "analytics_storage_display_in_widget",
        "checkboxText": "Display in the widget",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "CHECKBOX",
            "name": "analytics_storage_readonly",
            "checkboxText": "Readonly",
            "simpleValueType": true,
            "defaultValue": false,
            "enablingConditions": [
              {
                "paramName": "analytics_storage_display_in_widget",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "SELECT",
            "name": "analytics_storage_sync_consent_with",
            "displayName": "Synchronize consent with",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "functionality_storage",
                "displayValue": "Functionality storage"
              },
              {
                "value": "security_storage",
                "displayValue": "Security storage"
              },
              {
                "value": "personalization_storage",
                "displayValue": "Personalization storage"
              },
              {
                "value": "ad_storage",
                "displayValue": "Ad storage"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "analytics_storage_display_in_widget",
                "paramValue": false,
                "type": "EQUALS"
              }
            ],
            "notSetText": "None"
          },
          {
            "type": "CHECKBOX",
            "name": "analytics_storage_show_again",
            "checkboxText": "Show the modal again if storage is denied",
            "simpleValueType": true,
            "defaultValue": false,
            "enablingConditions": [
              {
                "paramName": "analytics_storage_display_in_widget",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "The settings modal will be opened again if the storage is denied.",
            "subParams": [
              {
                "type": "TEXT",
                "name": "analytics_storage_show_again_expiration",
                "displayName": "After",
                "simpleValueType": true,
                "defaultValue": 7,
                "enablingConditions": [
                  {
                    "paramName": "analytics_storage_show_again",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueUnit": "days",
                "valueValidators": [
                  {
                    "type": "POSITIVE_NUMBER"
                  }
                ]
              }
            ]
          }
        ],
        "defaultValue": false
      },
      {
        "type": "TEXT",
        "name": "analytics_storage_event_trigger",
        "displayName": "Event trigger name",
        "simpleValueType": true,
        "defaultValue": "hklink_analytics_storage",
        "help": "The name of a trigger that will be invoked on after a consent."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "composite_consent",
    "displayName": "Composite consent",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "PARAM_TABLE",
        "name": "composite_consent_event_triggers",
        "displayName": "Event triggers",
        "paramTableColumns": [
          {
            "param": {
              "type": "TEXT",
              "name": "name",
              "displayName": "Trigger name",
              "simpleValueType": true,
              "valueValidators": [
                {
                  "type": "NON_EMPTY"
                }
              ]
            },
            "isUnique": true
          },
          {
            "param": {
              "type": "CHECKBOX",
              "name": "functionality_storage",
              "checkboxText": "Functionality storage",
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "CHECKBOX",
              "name": "security_storage",
              "checkboxText": "Security storage",
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "CHECKBOX",
              "name": "personalization_storage",
              "checkboxText": "Personalization storage",
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "CHECKBOX",
              "name": "ad_storage",
              "checkboxText": "Ad storage",
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "CHECKBOX",
              "name": "analytics_storage",
              "checkboxText": "Analytics Storage",
              "simpleValueType": true
            },
            "isUnique": false
          }
        ],
        "help": "If you need to invoke some trigger only if the user makes consent with more storage types together then define the trigger here.",
        "newRowTitle": "New event trigger",
        "newRowButtonText": "Add event trigger",
        "editRowTitle": "Edit event trigger"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "translation_settings",
    "displayName": "Translation settings",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "locales",
        "displayName": "Locales",
        "simpleValueType": true,
        "defaultValue": "en",
        "textAsList": true,
        "lineCount": 4,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "help": "One per line."
      },
      {
        "type": "SELECT",
        "name": "locale_detection_strategy",
        "displayName": "Locale detection strategy",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "browser",
            "displayValue": "Browser"
          },
          {
            "value": "document",
            "displayValue": "Document"
          },
          {
            "value": "disabled",
            "displayValue": "Disabled"
          }
        ],
        "simpleValueType": true,
        "help": "\"Browser\" to get user\u0027s browser language or \"Document\" to read value from \u0026lt;html lang\u003d\"...\"\u0026gt; of current page.",
        "defaultValue": "document"
      },
      {
        "type": "TEXT",
        "name": "current_locale",
        "displayName": "Locale",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": []
          }
        ],
        "help": "You must define the website locale when the detection strategy is disabled. The locale must be one of the previously defined locales.",
        "enablingConditions": [
          {
            "paramName": "locale_detection_strategy",
            "paramValue": "disabled",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "PARAM_TABLE",
        "name": "translations",
        "displayName": "Translations",
        "paramTableColumns": [
          {
            "param": {
              "type": "TEXT",
              "name": "locale",
              "displayName": "Locale",
              "simpleValueType": true,
              "valueValidators": [
                {
                  "type": "NON_EMPTY"
                }
              ]
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "SELECT",
              "name": "key",
              "displayName": "Key",
              "macrosInSelect": false,
              "selectItems": [
                {
                  "value": "consent_modal_title",
                  "displayValue": "consent_modal_title"
                },
                {
                  "value": "consent_modal_description",
                  "displayValue": "consent_modal_description"
                },
                {
                  "value": "consent_modal_primary_btn",
                  "displayValue": "consent_modal_primary_btn"
                },
                {
                  "value": "settings_modal_title",
                  "displayValue": "settings_modal_title"
                },
                {
                  "value": "settings_modal_save_settings_btn",
                  "displayValue": "settings_modal_save_settings_btn"
                },
                {
                  "value": "settings_modal_accept_all_btn",
                  "displayValue": "settings_modal_accept_all_btn"
                },
                {
                  "value": "settings_modal_reject_all_btn",
                  "displayValue": "settings_modal_reject_all_btn"
                },
                {
                  "value": "settings_modal_close_btn_label",
                  "displayValue": "settings_modal_close_btn_label"
                },
                {
                  "value": "settings_modal_before_consent_title",
                  "displayValue": "settings_modal_before_consent_title"
                },
                {
                  "value": "settings_modal_before_consent_description",
                  "displayValue": "settings_modal_before_consent_description"
                },
                {
                  "value": "settings_modal_after_consent_title",
                  "displayValue": "settings_modal_after_consent_title"
                },
                {
                  "value": "settings_modal_after_consent_description",
                  "displayValue": "settings_modal_after_consent_description"
                },
                {
                  "value": "functionality_storage_title",
                  "displayValue": "functionality_storage_title"
                },
                {
                  "value": "functionality_storage_description",
                  "displayValue": "functionality_storage_description"
                },
                {
                  "value": "personalization_storage_title",
                  "displayValue": "personalization_storage_title"
                },
                {
                  "value": "personalization_storage_description",
                  "displayValue": "personalization_storage_description"
                },
                {
                  "value": "security_storage_title",
                  "displayValue": "security_storage_title"
                },
                {
                  "value": "security_storage_description",
                  "displayValue": "security_storage_description"
                },
                {
                  "value": "ad_storage_title",
                  "displayValue": "ad_storage_title"
                },
                {
                  "value": "ad_storage_description",
                  "displayValue": "ad_storage_description"
                },
                {
                  "value": "analytics_storage_title",
                  "displayValue": "analytics_storage_title"
                },
                {
                  "value": "analytics_storage_description",
                  "displayValue": "analytics_storage_description"
                },
                {
                  "value": "consent_modal_revision_message",
                  "displayValue": "consent_modal_revision_message"
                },
                {
                  "value": "modal_trigger_title",
                  "displayValue": "modal_trigger_title"
                },
                {
                  "value": "consent_modal_secondary_btn_settings",
                  "displayValue": "consent_modal_secondary_btn_settings"
                },
                {
                  "value": "consent_modal_secondary_btn_accept_necessary",
                  "displayValue": "consent_modal_secondary_btn_accept_necessary"
                }
              ],
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "TEXT",
              "name": "value",
              "displayName": "Translation",
              "simpleValueType": true,
              "lineCount": 2
            },
            "isUnique": false
          }
        ],
        "help": "Here you can rewrite default translations that are defined inside the widget.",
        "newRowButtonText": "Add translation",
        "editRowTitle": "Edit translation",
        "newRowTitle": "New translation"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "stylesheets_group",
    "displayName": "Stylesheets",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "include_default_stylesheets",
        "checkboxText": "Include default stylesheets",
        "simpleValueType": true,
        "defaultValue": true
      },
      {
        "type": "TEXT",
        "name": "external_stylesheets",
        "displayName": "External stylesheets",
        "simpleValueType": true,
        "textAsList": true,
        "lineCount": 2,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#\u003d]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?\u0026//\u003d]*)"
            ]
          }
        ],
        "help": "One URL per line."
      },
      {
        "type": "TEXT",
        "name": "internal_stylesheets",
        "displayName": "Internal stylesheet",
        "simpleValueType": true,
        "help": "CSS rules without \u0026lt;style\u0026gt;\u0026lt;/style\u0026gt; tags.",
        "lineCount": 2
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "scripts_group",
    "displayName": "Page scripts",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "page_scripts",
        "checkboxText": "Manage page scripts",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "Enable if you want to easily manage existing \u0026lt;script\u0026gt; tags."
      },
      {
        "type": "TEXT",
        "name": "script_selector",
        "displayName": "Script selector",
        "simpleValueType": true,
        "defaultValue": "data-cookiecategory",
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^data-.+$"
            ]
          }
        ],
        "enablingConditions": [
          {
            "paramName": "page_scripts",
            "paramValue": true,
            "type": "EQUALS"
          }
        ],
        "help": "The name of a data attribute that is used for managed \u0026lt;script\u0026gt; tags."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "integration",
    "displayName": "Integration",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "GROUP",
        "name": "user",
        "displayName": "User",
        "groupStyle": "ZIPPY_OPEN",
        "subParams": [
          {
            "type": "SELECT",
            "name": "user_identity",
            "displayName": "Identity",
            "macrosInSelect": true,
            "selectItems": [
              {
                "value": "default",
                "displayValue": "Generated UUID"
              }
            ],
            "simpleValueType": true,
            "help": "Identities for users are by default automatically generated UUIDs that are stored in a browser\u0027s local storage. You can set a custom variable from the container, but the default strategy will be used anyway if the variable contains an empty value.",
            "defaultValue": "default"
          },
          {
            "type": "PARAM_TABLE",
            "name": "user_attributes",
            "displayName": "Attributes",
            "paramTableColumns": [
              {
                "param": {
                  "type": "TEXT",
                  "name": "name",
                  "displayName": "Name",
                  "simpleValueType": true
                },
                "isUnique": true
              },
              {
                "param": {
                  "type": "TEXT",
                  "name": "value",
                  "displayName": "Value",
                  "simpleValueType": true
                },
                "isUnique": false
              }
            ]
          }
        ]
      },
      {
        "type": "GROUP",
        "name": "cmp_api",
        "displayName": "CMP API",
        "groupStyle": "ZIPPY_OPEN",
        "subParams": [
          {
            "type": "CHECKBOX",
            "name": "cmp_api_enabled",
            "checkboxText": "Enabled",
            "simpleValueType": true,
            "defaultValue": false
          },
          {
            "type": "TEXT",
            "name": "cmp_api_host",
            "displayName": "URL",
            "simpleValueType": true,
            "help": "The URL of your CMP application, just hostname like \"https://www.domain.com\" without path, etc.",
            "enablingConditions": [
              {
                "paramName": "cmp_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "type": "SELECT",
            "name": "cmp_api_version",
            "displayName": "API Version",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": 1,
                "displayValue": "v1"
              }
            ],
            "simpleValueType": true,
            "defaultValue": 1,
            "enablingConditions": [
              {
                "paramName": "cmp_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "cmp_api_project",
            "displayName": "Project code (optional)",
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "cmp_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "The website domain will be used as the project code if the field is not filled."
          },
          {
            "type": "CHECKBOX",
            "name": "cmp_api_consent_api_enabled",
            "checkboxText": "Consent API enabled",
            "simpleValueType": true,
            "defaultValue": true,
            "enablingConditions": [
              {
                "paramName": "cmp_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "Consents are sent into the CMP is the option is checked."
          },
          {
            "type": "CHECKBOX",
            "name": "cmp_api_cookies_api_enabled",
            "checkboxText": "Cookies API enabled",
            "simpleValueType": true,
            "defaultValue": true,
            "enablingConditions": [
              {
                "paramName": "cmp_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "Cookie tables in the widget are automatically created if the option is checked."
          },
          {
            "type": "SIMPLE_TABLE",
            "name": "cmp_api_cookie_table_headers",
            "displayName": "Cookie table headers",
            "simpleTableColumns": [
              {
                "defaultValue": "",
                "displayName": "",
                "name": "name",
                "type": "SELECT",
                "selectItems": [
                  {
                    "value": "purpose",
                    "displayValue": "Description"
                  },
                  {
                    "value": "processing_time",
                    "displayValue": "Expiration"
                  },
                  {
                    "value": "type",
                    "displayValue": "Type (1st party or 3rd party)"
                  },
                  {
                    "value": "link",
                    "displayValue": "Link"
                  },
                  {
                    "value": "link_find_out_more",
                    "displayValue": "Link (find out more)"
                  },
                  {
                    "value": "provider",
                    "displayValue": "Provider"
                  },
                  {
                    "value": "category",
                    "displayValue": "Category"
                  }
                ]
              }
            ],
            "enablingConditions": [
              {
                "paramName": "cmp_api_cookies_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "LABEL",
            "name": "cmp_api_cookie_table_headers_label",
            "displayName": "Header \"name\" is always automatically as first so it\u0027s not user-defined.",
            "enablingConditions": [
              {
                "paramName": "cmp_api_cookies_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          }
        ]
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

/**
 * Cookie Consent
 * Developed by '68 Publishers s.r.o. · http://68publishers.io
 * See documentation at https://github.com/68publishers/cookie-consent
 */
const log = require('logToConsole');
const setDefaultConsentState = require('setDefaultConsentState');
const createArgumentsQueue = require('createArgumentsQueue');
const queryPermission = require('queryPermission');
const getCookieValues = require('getCookieValues');
const injectScript = require('injectScript');
const setInWindow = require('setInWindow');
const callInWindow = require('callInWindow');
const JSON = require('JSON');
const Object = require('Object');
const makeInteger = require('makeInteger');

log('data =', data);

// create gtag
const gtag = createArgumentsQueue('gtag', 'dataLayer');

// create temporary wrapper in the window
const temporaryWrapper = (function() {
  const events = [];
  
  return {
    on: function (event, callback, scope) {
      events.push([event, callback, scope || null]);
      
      return function () {};
    },
    getEvents: function () {
      return events;
    }
  };
})();

setInWindow('CookieConsentWrapper', temporaryWrapper, false);

// parse consents from cookies
let consentCookie = getCookieValues(data.cookie_name);

consentCookie = JSON.parse(consentCookie[0] || '{}');
consentCookie = consentCookie.hasOwnProperty('level') && consentCookie.level.length ? consentCookie.level : [];

// build storage pool & event triggers
const storagePool = {};
const eventTriggers = {};
const storageNames = ['functionality_storage', 'security_storage', 'personalization_storage', 'ad_storage', 'analytics_storage'];

for (let key in storageNames) {
  const storageName = storageNames[key];
  const syncConsentWith = data[storageName + '_sync_consent_with'];
  const showModalAgain = data[storageName + '_show_again'];
  const showModalAgainExpiration = data[storageName + '_show_again_expiration'];
  const eventTriggerName = data[storageName + '_event_trigger'];
  
  // build storage config
  const storage = {
    name: storageName,
    enabled_by_default: data[storageName + '_enabled_by_default'] || false,
    display_in_widget: data[storageName + '_display_in_widget'] || false,
    readonly: data[storageName + '_readonly'] || false,
  };
  
  if (syncConsentWith) {
    storage.sync_consent_with = syncConsentWith;
  }
  
  if (true === showModalAgain && showModalAgainExpiration) {
      storage.show_modal_again_expiration = makeInteger(showModalAgainExpiration);
  }
  
  // push into the pool
  storagePool[storage.name] = storage;
  
  // push new trigger or update existing
  if (eventTriggerName && '' !== eventTriggerName) {
    if (eventTriggers.hasOwnProperty(eventTriggerName)) {
      eventTriggers[eventTriggerName].storage_names.push(storage.name);
    } else {
      eventTriggers[eventTriggerName] = {
        name: eventTriggerName,
        storage_names: [storage.name],
        type: 'or'
      };
    }
  }
}

// process composite triggers
for (let key in data.composite_consent_event_triggers || []) {
  const compositeEventTrigger = data.composite_consent_event_triggers[key];
  
  // check duplicated trigger name
  if (eventTriggers.hasOwnProperty(compositeEventTrigger.name)) {
    log('Error: Composite event trigger "' + compositeEventTrigger.name + '" defined but some trigger with same name is also defined as a storage trigger.');
    data.gtmOnFailure();
    
    continue;
  }
  
  // get array of storage names that are needed for triggering of an event
  const compositeEventTriggerStorageNames = [];
  
  for (let storageKey in storageNames) {
    const storageName = storageNames[storageKey];

    if (compositeEventTrigger.hasOwnProperty(storageName) && compositeEventTrigger[storageName]) {
      compositeEventTriggerStorageNames.push(storageName);
    }
  }

  // append new composite trigger
  if (0 < compositeEventTriggerStorageNames.length) {
    eventTriggers[compositeEventTrigger.name] = {
      name: compositeEventTrigger.name,
      storage_names: compositeEventTriggerStorageNames,
      type: 'and'
    };
  }
}

const defaultConsents = {};
const acceptedStorageNames = [];

// setup default consent & invoke event triggers for accepted storages
for (let key in storagePool) {
  const storage = storagePool[key];
  
  let defaultStorageConsent = -1 !== consentCookie.indexOf(storage.name) || storage.enabled_by_default ? 'granted' : 'denied';
  
  // if consent is denied then check "sync_consent_with" property
  if ('denied' === defaultStorageConsent && storage.hasOwnProperty('sync_consent_with') && storagePool.hasOwnProperty(storage.sync_consent_with)) {
    const delegatedStorage = storagePool[storage.sync_consent_with];
    
    defaultStorageConsent = -1 !== consentCookie.indexOf(delegatedStorage.name) || delegatedStorage.enabled_by_default ? 'granted' : 'denied';
  }

  defaultConsents[storage.name] = defaultStorageConsent;
  
  if ('granted' === defaultStorageConsent) {
    acceptedStorageNames.push(storage.name);
  }
}

// setup default consents
setDefaultConsentState(defaultConsents);

// fire event triggers for granted consents
for (let eventTriggerKey in eventTriggers) {
  const eventTrigger = eventTriggers[eventTriggerKey];
  let invoke = false;

  // check needed consents
  for (let storageKey in eventTrigger.storage_names) {
    invoke = -1 !== acceptedStorageNames.indexOf(eventTrigger.storage_names[storageKey]);

    if ((invoke && 'or' === eventTrigger.type) || (!invoke && 'and' === eventTrigger.type)) {
      break;
    }
  }

  // fire a trigger and remove the trigger from widget's triggers
  if (invoke) {
    gtag('event', eventTrigger.name, {});
    Object.delete(eventTriggers, eventTriggerKey);
    
    log('EventTrigger "' + eventTrigger.name + '" invoked with the default consent.');
  }
}

// build custom translations
const translationsData = data.translations || [];
const translations = {};
let translationKey;
let translation;

for (translationKey in translationsData) {
  translation = translationsData[translationKey];
  
  if (!translations.hasOwnProperty(translation.locale)) {
    translations[translation.locale] = {};
  }
  
  translations[translation.locale][translation.key] = translation.value;
}

// build user attributes
const userAttributesData = data.user_attributes || [];
const userAttributes = {};
let userAttributeKey;
let userAttribute;

for (userAttributeKey in userAttributesData) {
  userAttribute = userAttributesData[userAttributeKey];
  userAttributes[userAttribute.name] = userAttribute.value;
}

// create plugin options
const pluginOptions = {
  force_consent: data.force_consent,
  autorun: data.autorun,
  hide_from_bots: data.hide_from_bots,
  cookie_name: data.cookie_name,
  cookie_expiration: makeInteger(data.cookie_expiration),
  revision: makeInteger(data.revision),
  delay: makeInteger(data.delay),
  auto_language: 'disabled' !== data.locale_detection_strategy ? data.locale_detection_strategy : null,
  page_scripts: data.page_scripts
};

if (data.hasOwnProperty('current_locale')) {
  pluginOptions.current_lang = data.current_locale;
}

if (data.hasOwnProperty('script_selector')) {
  pluginOptions.script_selector = data.script_selector;
}

if (data.hasOwnProperty('cookie_domain') && '' !== data.cookie_domain) {
    pluginOptions.cookie_domain = data.cookie_domain;
}

// create auto-clear options
const autoClearOptions = {
  enabled: data.auto_clear_enabled
};

if (data.auto_clear_enabled) {
  autoClearOptions.strategy = data.auto_clear_strategy;
  autoClearOptions.cookie_names = data.auto_clear_cookie_names || [];
}

const cookieTableHeaders = [];

if (data.cmp_api_enabled && data.cmp_api_cookies_api_enabled) {
  cookieTableHeaders.push('name');
  
  for (let i in data.cmp_api_cookie_table_headers) {
    cookieTableHeaders.push(data.cmp_api_cookie_table_headers[i].name);
  }
}

// setup wrapper config
setInWindow('cc_wrapper_config', {
  plugin_options: pluginOptions,
  auto_clear_options: autoClearOptions,
  
  consent_modal_options: {
    layout: data.consent_modal_layout,
    position: data.consent_modal_position,
    transition: data.consent_modal_transition,
    primary_button_role: data.consent_modal_primary_button_role,
    secondary_button_role: data.consent_modal_secondary_button_role,
    swap_buttons: 'secondary_primary' === data.consent_modal_buttons_order,
    show_third_button: data.consent_modal_show_third_button
  },
  
  settings_modal_options: {
    layout: data.settings_modal_layout,
    position: data.settings_modal_position,
    transition: data.settings_modal_transition,
    modal_trigger_selector: data.modal_trigger_selector || undefined
  },
  
  ui_options: {
    include_default_stylesheets: data.include_default_stylesheets,
    external_stylesheets: data.external_stylesheets || [],
    internal_stylesheets: data.hasOwnProperty('internal_stylesheets') ? [data.internal_stylesheets] : []
  },
  
  user_options: {
    identity: 'default' !== data.user_identity ? data.user_identity : null,
    attributes: userAttributes
  },
  
  cmp_api_options: {
    url: data.cmp_api_enabled ? data.cmp_api_host : null,
    project: data.cmp_api_enabled && data.cmp_api_project ? data.cmp_api_project : null,
    version: data.cmp_api_enabled ? data.cmp_api_version : 1,
    consent_api_enabled: data.cmp_api_enabled ? data.cmp_api_consent_api_enabled : false,
    cookies_api_enabled: data.cmp_api_enabled ? data.cmp_api_cookies_api_enabled : false,
    cookie_table_headers: cookieTableHeaders
  },
  
  storage_pool: Object.values(storagePool),
  event_triggers: Object.values(eventTriggers),
  locales: data.locales,
  translations: translations
}, true);

// inject cookie consent wrapper
// const packageVersion = 'latest' === data.package_version ? '' : '@' + data.package_version;
const cookieConsentWrapperScript = 'https://storage.googleapis.com/consentbanner/cookie-consent.min.js';

if (queryPermission('inject_script', cookieConsentWrapperScript)) {
    injectScript(cookieConsentWrapperScript, function () {      
      const events = temporaryWrapper.getEvents();
      let event;
      let eventKey;
      
      for (eventKey in events) {
        event = events[eventKey];
        callInWindow('CookieConsentWrapper.on', event[0], event[1], event[2]);
      }
      
      data.gtmOnSuccess();
    }, data.gtmOnFailure);
} else {
  data.gtmOnFailure();
}

data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "wait_for_update"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://unpkg.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "gtag"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "cc_wrapper_config"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CookieConsentWrapper"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CookieConsentWrapper.on"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []
setup: ''


___NOTES___

Created on 17. 12. 2021 0:22:20


